
title: Home
# Optional background for all views. Check https://developer.mozillfaa.org/en-US/docs/Web/CSS/background for more examples.
background: center / cover no-repeat url("/background.png") fixed
# Exclude entities from "Unused entities" view
# excluded_entities:
#   - weblink.router

custom_header:
  compact_mode: true
  exceptions:
    - conditions:
      user: emilie, naia
      config:
        disable_sidebar: true
        hide_config: true
        # tab:
    - conditions:
      user: tablets_1
      config:
        kiosk_mode: true


resources:
  - url: /community_plugin/button-card/button-card.js
    type: module
  - url: /community_plugin/lovelace-layout-card/layout-card.js
    type: js
  - url: /community_plugin/entity-attributes-card/entity-attributes-card.js
    type: js
  - url: /community_plugin/lovelace-slider-entity-row/slider-entity-row.js
    type: js
  - url: /community_plugin/surveillance-card/surveillance-card.js
    type: module
  - url: /community_plugin/lovelace-fold-entity-row/fold-entity-row.js
    type: js
  - url: /community_plugin/lovelace-state-switch/state-switch.js
    type: js
  - url: /community_plugin/lovelace-toggle-lock-entity-row/toggle-lock-entity-row.js
    type: js
  - url: /community_plugin/lovelace-card-tools/card-tools.js
    type: js
  # - url: /community_plugin/compact-custom-header/compact-custom-header.js
  #   type: module
  - type: module
    url: /local/floorplan/floorplan-card.js?v=1.1.14
  - url: /community_plugin/lovelace-auto-entities/auto-entities.js
    type: module
  - url: /community_plugin/custom-header/custom-header.js
    type: module


views:

#######################
#                     #
#    MAIN CONTROLS    #
#                     #
#######################

  - icon: mdi:home-assistant
    title: Main Control
    id: main_control
    panel: true
    layout: auto
    column_num: 3
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: entities
            title: Main Lights
            entities:
              - entity: light.dining_room_lights
                type: custom:slider-entity-row
                toggle: true
              - entity: light.conservatory_couch
                type: custom:slider-entity-row
                toggle: true
              - entity: light.conservatory_floor_1
                type: custom:slider-entity-row
                toggle: true
          - type: entities
            title: Other Lights
            entities:
              - entity: light.bedroom
                type: custom:slider-entity-row
                toggle: true
              - entity: light.baby_room
                type: custom:slider-entity-row
                toggle: true
              - entity: light.changing_table
                type: custom:slider-entity-row
                toggle: true
              - entity: light.lightstrip_1
                type: custom:slider-entity-row
                toggle: true
                name: Wine Cellar
          - type: entities
            title: Media
            entities:
              - media_player.samsung_tv_remote
#             # type: custom:slider-entity-row
#             type: custom:toggle-lock-entity-row
#             users:
#               - Aephir
#               - Kristina
          - break

          - type: entities
            title: Outdoor
            show_header_toggle: false
            entities:
              - entity: switch.fountain
              - entity: switch.rabbit_light
              - entity: switch.shed_main_power
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
          - type: entities
            title: Kitchen
            show_header_toggle: false
            entities:
              - entity: switch.switch
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
                  - Kristina
              - entity: switch.kettle
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
                  - Kristina

          - type: vertical-stack
            id: fume_hood_controls
            cards:
              - type: "custom:button-card"
                color_type: label-card
                color: rgb(58, 106, 183)
                name: Fume Hood Controls
              - type: horizontal-stack
                cards:
                    # - type: "custom:button-card"
                    #   color_type: blank-card
                    - type: "custom:button-card"
                      size: 25px
                      color_type: card
                      color: auto
                      default_color: rgb(58, 106, 183)
                      icon: mdi:power
                      action: service
                      service:
                        domain: remote
                        action: send_command
                        entity_id: remote.kitchen_remote
                        data:
                          command:
                            - 'fume_hood_power'
                    - type: "custom:button-card"
                      color_type: card
                      size: 25px
                      color: rgb(58, 106, 183)
                      icon: mdi:fan-off
                      action: service
                      service:
                        domain: remote
                        action: send_command
                        entity_id: remote.kitchen_remote
                        data:
                          command:
                            - 'fume_hood_decrease'
                    - type: "custom:button-card"
                      color_type: card
                      size: 25px
                      color: rgb(58, 106, 183)
                      icon: mdi:fan
                      action: service
                      service:
                        domain: remote
                        action: send_command
                        entity_id: remote.kitchen_remote
                        data:
                          command:
                            - 'fume_hood_increase'
                    - type: "custom:button-card"
                      color_type: card
                      size: 25px
                      color: auto
                      default_color: rgb(58, 106, 183)
                      icon: mdi:lightbulb-on
                      action: service
                      service:
                        domain: remote
                        action: send_command
                        entity_id: remote.kitchen_remote
                        data:
                          command:
                            - 'fume_hood_lights'
                    # - type: "custom:button-card"
#                     #   color_type: blank-card

          - break

          - type: entities
            title: Toggle Motion Sensors
            entities:
              - input_boolean.main_floor_lights_motion_control
              - input_boolean.top_floor_lights_motion_control
              - input_boolean.basement_lights_motion_control
              - input_boolean.creative_lights_motion_control

          - type: entities
            title: Toggle House Modes
            entities:
              - input_boolean.vacation_mode
              - input_boolean.kids_home
              - input_boolean.guest_mode
              - input_boolean.cooking_mode
              - input_boolean.party_mode

#####################
#                   #
#    INFORMATION    #
#                   #
#####################

  # - !include config_files/lovelace/information.yaml

  - title: Information
    icon: mdi:information-variant
    id: information
    panel: true
    layout: auto
    column_num: 3
    # max_columns: 4
    # column_width:
    # max_width:
    # min_height:
    ltr: false
    rebuild: false
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: glance
            title: Family
            columns: 4
            entities:
              - entity: device_tracker.meta_walden
                name: Walden
              - entity: device_tracker.meta_kristina
                name: Kristina
              - entity: device_tracker.meta_emilie
                name: Emilie
              - entity: device_tracker.meta_naia
                name: Naia
              # - entity: sensor.car_ble
              #   name: Car
              - entity: sensor.walden_phone_battery
                name: Battery
              - entity: sensor.kristina_phone_battery
                name: Battery
              - entity: sensor.emilie_phone_battery
                name: Battery
              - entity: sensor.niels_brodys_ipad_2_battery_level
                name: Battery
              - entity: binary_sensor.aephir_in_bed
                icon: fas:bed
                name: In bed
                state_color: true
              - entity: binary_sensor.kristina_in_bed
                icon: fas:bed
                name: In bed
                state_color: true
              # - entity: sensor.car_battery
              #   name: Battery

          - type: glance
            title: Alarm Status
            columns: 3
            entities:
              - entity: alarm_control_panel.house
                name: Security system
              - entity: binary_sensor.someonehome360
                name: Occupancy
                text_template: '${entity.state ? entity.state.replace("On", "Occupied").replace("Off", "Unoccupied")} : "undefined"}'
              - entity: binary_sensor.smoke_sensor_158d0001bc49bd
                name: Smoke detector (kitchen)

          - break

          - type: custom:entity-attributes-card
            title: Doors and Windows
            entity: sensor.windows_and_doors
            filter:
              include:
                - key: sensor.windows_and_doors.number_of_doors
                  name: Number of Open Doors
                - key: sensor.windows_and_doors.number_of_windows
                  name: Number of Open Windows
                - key: sensor.windows_and_doors.shed_door
                  name: Shed Door
                - key: sensor.windows_and_doors.last_door_opened
                  name: Last Opened Door
                - key: sensor.windows_and_doors.door_opened_at
                  name: Door Opened at
                - key: sensor.windows_and_doors.list_of_open
                  name: List of Open Doors and Windows
          - type: glance
            title: Plant Status
            columns: 4
            entities:
              - entity: plant.avocado
              - entity: plant.herb_garden
              - entity: plant.kalamansi
              - entity: plant.lemon

          - break

          - type: picture-entity
            entity: camera.front_door
            camera_view: live
          # - type: picture-entity
          #   entity: camera.ffmpeg
          #   camera_view: live
          - type: picture-glance
            camera_image: camera.ffmpeg
            title: wyze2
            entities:
              - camera.ffmpeg
            camera_view: live
          - type: picture-entity
            entity: camera.ocotprint
            camera_view: live

#########################
#                       #
#    MANUAL CONTROLS    #
#                       #
#########################

  - icon: mdi:wrench
    title: Manual Control
    id: manual_control
    panel: true
    layout: auto
    column_num: 3
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: entities
            title: Toggle Motion Sensors
            entities:
              - input_boolean.main_floor_lights_motion_control
              - input_boolean.top_floor_lights_motion_control
              - input_boolean.basement_lights_motion_control
              - input_boolean.creative_lights_motion_control

          - type: entities
            title: Toggle House Modes
            entities:
              - input_boolean.vacation_mode
              - input_boolean.kids_home
              - input_boolean.guest_mode
              - input_boolean.cooking_mode
              - input_boolean.party_mode

          - break

          - type: entities
            title: Main Floor Lights
            show_header_toggle: false
            entities:
              - type: custom:fold-entity-row
                head: light.conservatory_lights
                items:
                - entity: light.conservatory_couch
                  type: custom:slider-entity-row
                  toggle: true
                - entity: light.conservatory_floor_1
                  type: custom:slider-entity-row
                  toggle: true
              - type: custom:fold-entity-row
                head: light.dining_room_lights
                items:
                - entity: light.dining_table_lights
                  type: custom:slider-entity-row
                  toggle: true
                - entity: light.living_room_lightstrip
                  type: custom:slider-entity-row
                  toggle: true
              - type: custom:fold-entity-row
                head: light.kitchen_lights
                items:
                - entity: light.kitchen_spots
                  type: custom:slider-entity-row
                  toggle: true
                - entity: light.kitchen_cabinet_lights
                  type: custom:slider-entity-row
                  toggle: true
              - type: custom:fold-entity-row
                head: light.baby_room_lights
                items:
                - entity: light.changing_table
                  type: custom:slider-entity-row
                  toggle: true
                - entity: light.baby_room
                  type: custom:slider-entity-row
                  toggle: true
              - type: custom:fold-entity-row
                head: light.kitchen_lights
                items:
                - entity: light.kitchen_spots
                  type: custom:slider-entity-row
                  toggle: true
                - entity: light.kitchen_cabinet_lights
                  type: custom:slider-entity-row
                  toggle: true
              - entity: light.entrance
                type: custom:slider-entity-row
                toggle: true
              - entity: light.bathroom
                type: custom:slider-entity-row
                toggle: true

          - type: entities
            title: Top Floor Lights
            show_header_toggle: true
            entities:
              - entity: light.top_floor_tv_area
                type: custom:slider-entity-row
                toggle: true
              - entity: light.top_floor_hallway
                type: custom:slider-entity-row
                toggle: true
              - entity: light.top_floor_bathroom
                type: custom:slider-entity-row
                toggle: true

          - break

          - type: entities
            title: Basement Lights
            show_header_toggle: true
            entities:
              - entity: light.basement_hallway
                type: custom:slider-entity-row
                toggle: true
              - entity: light.basement_entrance
                type: custom:slider-entity-row
                toggle: true
              - entity: light.walk_in_closet
                type: custom:slider-entity-row
                toggle: true
              - entity: light.tv_room
                type: custom:slider-entity-row
                toggle: true
              - entity: light.lightstrip_1
                type: custom:slider-entity-row
                toggle: true

          - type: entities
            title: Power Switches
            show_header_toggle: false
            entities:
              - entity: switch.switch
                icon: mdi:coffee-maker
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
                  - Kristina
              - entity: switch.fountain
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
                  - Kristina
              - entity: switch.top_floor_media
                icon: mdi:youtube-tv
              - entity: switch.kettle
                icon: mdi:kettle-steam
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
                  - Kristina
              - entity: switch.hassio
                icon: mdi:home-assistant
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
              - entity: switch.shed_main_power
                icon: mdi:hammer-wrench
                type: custom:toggle-lock-entity-row
                users:
                  - Aephir
              - entity: switch.neo_coolcam_2
                # icon: mdi:youtube-tv
              - entity: switch.zigbee_and_yeelight_power

# Sensors:
# sensor.shenzhen_neo_electronics_co_ltd_power_plug_12a_power
# sensor.shenzhen_neo_electronics_co_ltd_power_plug_12a_power_2
# sensor.sensor_hassio
# sensor.sensor_fountain
# sensor.power_top_floor_media
# sensor.neo_coolcam_power_plug_12a_power
# sensor.fibaro_system_fgwpef_wall_plug_gen5_power
# sensor.fibaro_system_fgwpef_wall_plug_gen5_power_2
# sensor.aeotec_zw100_multisensor_6_power


################
#              #
#    GRAPHS    #
#              #
################

  - icon: fas:chart-line
    title: Graphs
    id: graphs
    panel: true
    layout: auto
    column_num: 3
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: history-graph
            title: 'Temperature graphs'
            hours_to_show: 72
            refresh_interval: 60
            entities:
              - entity: sensor.temperature_wine_cellar
                name: Wine cellar
              - entity: sensor.temperature_washing_room
                name: Washing room
              - entity: sensor.temperature_bathroom
                name: Bathroom
              - entity: sensor.temperature_kitchen
                name: Kitchen
              - entity: sensor.aeotec_zw100_multisensor_6_temperature_2
                name: Conservatory
              - entity: sensor.temperature_shed
                name: Shed

          - type: history-graph
            title: 'Humidity graphs'
            hours_to_show: 72
            refresh_interval: 60
            entities:
              - entity: sensor.humidity_wine_cellar
                name: Wine cellar
              - entity: sensor.humidity_washing_room
                name: Washing room
              - entity: sensor.humidity_bathroom
                name: Bathroom
              - entity: sensor.humidity_kitchen
                name: Kitchen
              - entity: sensor.aeotec_zw100_multisensor_6_relative_humidity_2
                name: Conservatory
              - entity: sensor.humidity_shed
                name: Shed

          - break

          - type: history-graph
            title: 'Illumination graphs'
            hours_to_show: 72
            refresh_interval: 60
            entities:
              - entity: sensor.lightlevel_conservatory
                name: Conservatory
              - entity: sensor.lightlevel_basement_entrance
                name: Basement Entrance
              - entity: sensor.lightlevel_top_floor_stairway
                name: Top floor stairway
              - entity: sensor.lightlevel_tv_room
                name: TV room
              - entity: sensor.lightlevel_bathroom_2
                name: Bathroom
              - entity: sensor.lightlevel_top_floor_bathroom
                name: Upstairs bathroom
              - entity: sensor.lightlevel_top_floor_tv_room
                name: Top floor TV room
              - entity: sensor.lightlevel_kitchen
                name: Kitchen
              - entity: binary_sensor.lightlevel_entrance
                name: Entrance
              # - entity: sensor.aeotec_zw100_multisensor_6_luminance
              #   # unit_of_measurement: lux
              #   name: Walk-in closet

          - break

          - type: history-graph
            title: 'Power consumption graphs'
            hours_to_show: 72
            entities:
              - entity: sensor.fibaro_system_fgwpef_wall_plug_gen5_power
                name: Fibaro Power
              - entity: sensor.fibaro_system_fgwpef_wall_plug_gen5_power_2
                name: Fibaro2 Power
              - entity: sensor.neo_coolcam_power_plug_12a_power
                name: Espresso Power
              - entity: sensor.sensor_fountain
                name: Fountain Power
              - entity: sensor.sensor_hassio
                name: HASS.io Power
              # - entity: sensor.consumption_top_floor_media
              #   name: Top Floor Media Consumption
              - entity: sensor.power_top_floor_media
                name: Top Floor Media Power

##############
#            #
#    TECH    #
#            #
##############

  - icon: fas:cogs
    title: Tech
    id: tech_control
    panel: true
    layout: auto
    column_num: 3
    cards:
      - type: custom:layout-card
        layout: vertical
        cards:
          - type: entities
            title: Prusa i3 MK3S
            entities:
              - entity: switch.prusa_lights
              - entity: binary_sensor.prusa_i3_mk3s_printing
              - entity: binary_sensor.prusa_i3_mk3s_printing_error
              - entity: sensor.prusa_i3_mk3s_current_state
              - entity: sensor.prusa_i3_mk3s_job_percentage
              - entity: sensor.prusa_i3_mk3s_actual_bed_temp
              - entity: sensor.prusa_i3_mk3s_actual_tool0_temp
              - entity: sensor.prusa_i3_mk3s_actual_tool1_temp
              - entity: sensor.prusa_i3_mk3s_target_bed_temp
              - entity: sensor.prusa_i3_mk3s_target_tool0_temp
              - entity: sensor.prusa_i3_mk3s_target_tool1_temp
              - entity: sensor.prusa_i3_mk3s_time_elapsed
              - entity: sensor.prusa_i3_mk3s_time_remaining

          - break

          - type: entities
            entities:
              - sensor.hacs
              - sensor.potential_breaking_changes

          - type: entities
            title: Oven Controls
            entities:
              - entity: switch.oven
              - entity: input_select.oven_program
